<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1128產品下單系統</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/mycss.css">
    <link rel="stylesheet" href="css/color-chatgpt1.css">
    <link rel="stylesheet" href="css/table-rwd.css">
</head>

<body>

    <div class="container">
        <div class="row justify-content-center align-items-center vh-100">
            <div class="col-6 mt-5">
                <div class="card">
                    <div class="card-body h3 fw-700 text-bg-success">產品下單系統</div>
                    <div class="card-body">

                        <div class="mb-3 d-flex">
                            <label for="" class="form-label"></label>
                            <input type="text" class="form-control  " list="datalist" placeholder="產品名稱字數2~10個字" id="search01">
                            <datalist id="datalist">
                                <option value="USB集線器"></option>
                                <option value="天空藍魔蝦"></option>
                                <option value="巨大三葉蟲"></option>
                                <option value="巨大鸚鵡螺"></option>
                            </datalist>
                            <button class="btn btn-info">尋找</button>
                        </div>

                        <div class="mb-3">
                            <label for="" class="form-label">產品名稱</label>
                            <input type="text" class="form-control is-invalid" list="datalist"
                                placeholder="產品名稱字數2~10個字" id="p_name">
                            <datalist id="datalist">
                                <option value="鍵盤"></option>
                                <option value="滑鼠"></option>
                                <option value="27吋螢幕"></option>
                                <option value="Type-C 充電線"></option>
                            </datalist>
                            <div class="valid-feedback">產品名稱符合規定!</div>
                            <div class="invalid-feedback">產品名稱不符合規定!</div>
                        </div>

                        <div class="mb-3">
                            <label for="" class="form-label">價格</label>
                            <input type="number" min="60" max="200" value="60" class="form-control is-invalid"
                                id="p_price">
                            <div class="valid-feedback">產品數量符合規定!</div>
                            <div class="invalid-feedback">產品數量不符合規定!</div>
                        </div>

                        <div class="mb-3">
                            <label for="" class="form-label h4">數量<span class="h2 fw-700" id="p_qty"></span></label>
                            <input type="range" class="form-range" name="" id="range_size" min="0" max="100" value="10">
                        </div>

                        <div class="mb-3">
                            <div class="h3">加購配件</div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" value="滷蛋" name="chk01">
                                <label for="" class="form-check-label">滷蛋</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" value="豆干" name="chk01">
                                <label for="" class="form-check-label">豆干</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" value="高麗菜" name="chk01">
                                <label for="" class="form-check-label">高麗菜</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" value="玉米" name="chk01">
                                <label for="" class="form-check-label">玉米</label>
                            </div>
                        </div>

                        <div class="mb-3" id="p_radio01">
                            <div class="h4">運送方式</div>
                            <div class="form-check form-check-inline">
                                <input type="radio" name="radio01" class="form-check-input" value="外帶自取">
                                <label for="" class="form-check-label">黑貓宅即便</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input type="radio" name="radio01" class="form-check-input" value="外送">
                                <label for="" class="form-check-label">新竹貨運</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input type="radio" name="radio01" class="form-check-input" value="Uber Eat">
                                <label for="" class="form-check-label">超商取貨</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="radio01" class="form-check-input" value="foodpanda">
                                <label for="" class="form-check-label">貨到付款</label>
                            </div>
                        </div>

                        

                        <div class="row justify-content-around mb-3">
                            <button class="col-3 btn btn-primary" id="ok_btn">下單</button>
                            <button class="col-3 btn btn-danger">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.7.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>

    <script>
        let flag_p_name = false;
        let flag_p_price = false;
        let flag_p_main = false;
        let flag_p_size = false;
        let switch01 = '下架';

        $(function () {
            //監聽#p_name
            $("#p_name").on("input", function () {
                // console.log($(this).val().length < 20);
                if ($(this).val().length > 1 && $(this).val().length < 20) {
                    //符合規定
                    $(this).removeClass("is-invalid");
                    $(this).addClass("is-valid");
                    flag_p_name = true;
                } else {
                    //不符合規定
                    $(this).removeClass("is-valid");
                    $(this).addClass("is-invalid");
                    flag_p_name = false;
                }
            });

            //監聽p_price
            $("#p_price").on("input", function () {
                // console.log($(this).val());
                if ($(this).val() > 60 && $(this).val() <= 200) {
                    //符合規定
                    $(this).removeClass("is-invalid");
                    $(this).addClass("is-valid");
                    flag_p_price = true;
                } else {
                    //不符合規定
                    $(this).removeClass("is-valid");
                    $(this).addClass("is-invalid");
                    flag_p_price = false;
                }
            });

            //監聽p_main
            $("#p_main").on("change", function () {
                console.log($(this).val());
                //符合規定
                $(this).removeClass("is-invalid");
                $(this).addClass("is-valid");
                flag_p_main = true;
            });

            //監聽p_size
            $("#range_size").on("input", function () {
                console.log($(this).val());
                $("#p_size").text($(this).val()+'%');
                flag_p_size = true;
            });

            //監聽switch01
            $("#switch01").on("change", function () {
                console.log($(this).is(':checked'));
                if ($(this).is(':checked')) {
                    //加辣
                    $(this).next().text('加辣');
                    switch01 = '加辣';
                } else {
                    //不加辣
                    $(this).next().text('不加辣');
                    switch01 = '不加辣';
                }

            });

            //監聽搜尋
            $("#search01").on("click", function () {
                console.log($("#search01").val());
            });

            //監聽按鈕 #ok_btn
            $("#ok_btn").on("click", function () {
                //console.log($(this).val());
                if (flag_p_name && flag_p_price && flag_p_main) {
                    console.log($("#p_name").val());
                    console.log($("#p_price").val());

                    // 加購配料 方法一
                    let chk01 = [];
                    $.each($("input[name='chk01']:checked"), function () {
                        chk01.push($(this).val());
                    });
                    console.log(chk01.join('/'))

                    // 取餐方式
                    let radio01 = [];
                    $("input[name='radio01']:checked").each(function () {
                        radio01.push($(this).val());
                    });

                    // 讀取資料
                    let p_name = $("#p_name").val();
                    let p_price = $("#p_price").val();
                    let p_main = $("#p_main").val();
                    let p_size = $("#range_size").val()+'%';
                    let p_chk01 = chk01.join(',');
                    let p_radio01 = radio01;


                    // 組 HTML
                    $("#my_card_body").empty();
                    let strHTML =
                        `<div class="h3 fw-700">
                            <span class="h4 text-center">便當品項:</span>
                            <span>${p_name}</span>
                        </div>
                        <div class="h3 fw-700">
                            <span class="h4 text-center">價格:</span>
                            <span>${p_price}</span>
                        </div>
                        <div class="h3 fw-700">
                            <span class="h4 text-center">數量:</span>
                            <span>${p_qty}</span>
                        </div>
                        <div class="h3 fw-700">
                            <span class="h4 text-center">加購配菜:</span>
                            <span>${p_chk01}</span>
                        </div>
                        <div class="h3 fw-700">
                            <span class="h4 text-center">取餐方式:</span>
                            <span>${p_radio01}</span>
                        </div>`;
                    $("#my_card_body").html(strHTML);

                } else {
                    // alert("有欄位錯誤，請更正!")
                    Swal.fire({
                        title: "錯誤",
                        text: "欄位有誤，請更正!",
                        icon: "error"
                    });
                }
            });
        });
    </script>
</body>

</html>